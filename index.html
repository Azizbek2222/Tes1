<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<title>HTML Run App</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase.js"></script>

<style>
*{box-sizing:border-box;font-family:Segoe UI,sans-serif}

body{
  margin:0;
  min-height:100vh;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:#fff;
}

/* EDITOR */
.app{
  max-width:700px;
  margin:auto;
  padding:25px;
}

textarea{
  width:100%;
  height:160px;
  border-radius:12px;
  border:none;
  padding:15px;
}

button{
  width:100%;
  margin-top:15px;
  padding:14px;
  border:none;
  border-radius:12px;
  font-size:16px;
  font-weight:bold;
  cursor:pointer;
  background:linear-gradient(135deg,#00f260,#0575e6);
  color:#fff;
}

/* RUN PAGE */
#runResult{
  padding:20px;
}
</style>
</head>
<body>

<!-- EDITOR -->
<div id="editor" class="app">
  <h2>ðŸš€ HTML Run App</h2>
  <textarea id="code" placeholder="HTML yozing..."></textarea>
  <button onclick="save()">â–¶ RUN & LINK</button>
  <p id="link"></p>
</div>

<!-- RUN NATIJA -->
<div id="runResult" style="display:none"></div>

<script>
var firebaseConfig={
  apiKey:"AIzaSyBrMKJ4MPilQg6gZsaE-Hlqlgo5F4Q8IsM",
  databaseURL:"https://xabar-tizimi-default-rtdb.firebaseio.com"
};
firebase.initializeApp(firebaseConfig);
var db=firebase.database();

var params=new URLSearchParams(location.search);
var runId=params.get("run");

if(runId){
  document.getElementById("editor").style.display="none";
  document.getElementById("runResult").style.display="block";

  db.ref("codes/"+runId).once("value").then(snap=>{
    document.getElementById("runResult").innerHTML=snap.val();
  });
}

function save(){
  var code=document.getElementById("code").value;
  var id=Date.now();
  db.ref("codes/"+id).set(code);

  var link=location.origin+location.pathname+"?run="+id;
  document.getElementById("link").innerHTML=
    `<a href="${link}" target="_blank">${link}</a>`;
}
</script>

</body>
</html>